/* Mobile background hidden by default (Desktop) */
.mobileBackground {
    display: none;
}

.galleryWrapper {
    /* User provided CSS logic */
    --img-size: calc(100px - 0.5rem / 2);
    display: grid;
    gap: 0.5rem;
    width: 100%;
    margin: 0 auto;
    justify-content: center;

    /* Mobile Layout - Collage Style */
    grid-template-columns: repeat(3, 1fr);
    padding: 1rem;
}

/* Desktop Grid Configuration */
@media (min-width: 768px) {
    .galleryWrapper {
        grid-template-columns: repeat(6, var(--img-size));
        grid-template-rows: repeat(4, var(--img-size));
        width: fit-content;
        padding: 0;
    }
}

.galleryItem {
    max-width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    /* Default span for mobile items unless overridden */
    grid-column: span 1;
    border-radius: 0.5rem;

    /* User's provided clip-path path */
    clip-path: path("M 80 20 C 100 0 100 0 120 20 C 140 40 160 60 180 80 C 200 100 200 100 180 120 C 160 140 140 160 120 180 C 100 200 100 200 80 180 C 60 160 40 140 20 120 C 0 100 0 100 20 80 Z");

    transition: filter 500ms, clip-path 500ms, z-index 500ms, transform 500ms;
    background-color: #000;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Mobile specific overrides for better collage look */
@media (max-width: 767px) {
    .galleryWrapper {
        /* Mobile Layout - Compact Bento Block (3x3) */
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
        padding: 0;
        width: 100%;
        max-width: 320px;
        /* Constrain width for a tight block */
        margin: 0 auto;
        position: relative;
        /* Context for background */
        z-index: 1;
        /* Ensure on top of background */
    }

    /* Fluid/Scribbled Aesthetic Background (Refactored to explicit div) */
    .mobileBackground {
        display: block;
        position: absolute;
        inset: -40px -20px;
        /* Bleed out slightly to frame the grid */
        z-index: -1;
        border-radius: 1.5rem;

        /* Generated Tech Paint Background */
        background-image: url('/mobile-gallery-bg.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;

        /* Blend with page background (black) */
        opacity: 0.7;
        mix-blend-mode: screen;
        /* Blend bright colors, drop blacks */
        filter: blur(4px) brightness(1.1) contrast(1.1);
        pointer-events: none;

        /* Soften the edges to blend seamlessly */
        mask-image: radial-gradient(circle at center, black 40%, transparent 95%);
    }

    .galleryItem {
        /* Reset all desktop/previous transforms */
        transform: none !important;
        margin: 0 !important;

        /* Shape: Chamfered Tech Squares */
        clip-path: polygon(15% 0, 100% 0, 100% 85%, 85% 100%, 0 100%, 0 15%) !important;
        border-radius: 0 !important;

        /* Square Aspect Ratio for uniform block */
        aspect-ratio: 1/1;
        width: 100%;

        position: relative;

        /* Cyber Pulse Animation */
        animation: cyberPulse 4s infinite ease-in-out;
    }

    /* 
       FILTER LOGIC for 3x3 Grid (9 items total)
       Sequence: R(1), Img(2), A(4). Img(6), I(7), Img(8). O(10), Img(12), T(13).
       Hidden (1-based indices): 3, 5, 9, 11
       Total available was 13.
    */
    .galleryItem:nth-child(3),
    .galleryItem:nth-child(5),
    .galleryItem:nth-child(9),
    .galleryItem:nth-child(11) {
        display: none !important;
    }

    /* Reset staggered effect from previous attempt */
    .galleryItem:nth-child(even) {
        transform: none !important;
    }

    /* Staggered Animation Delays for "Living Grid" feel */
    .galleryItem:nth-child(1) {
        animation-delay: 0s;
    }

    .galleryItem:nth-child(2) {
        animation-delay: 1.5s;
    }

    .galleryItem:nth-child(4) {
        animation-delay: 0.8s;
    }

    .galleryItem:nth-child(6) {
        animation-delay: 2.2s;
    }

    .galleryItem:nth-child(7) {
        animation-delay: 1.2s;
    }

    .galleryItem:nth-child(8) {
        animation-delay: 2.8s;
    }

    .galleryItem:nth-child(10) {
        animation-delay: 0.5s;
    }

    .galleryItem:nth-child(12) {
        animation-delay: 1.9s;
    }

    .galleryItem:nth-child(13) {
        animation-delay: 2.5s;
    }
}

@keyframes cyberPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 5px rgba(6, 182, 212, 0.4));
    }

    50% {
        filter: drop-shadow(0 0 15px rgba(34, 211, 238, 0.8)) brightness(1.1);
    }
}

.galleryContent {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* 
   Logic for staggered layout:
   In the user's snippet: img:nth-of-type(4), img:nth-of-type(9)
   We apply this to .galleryItem:nth-child(...)
   ONLY ON DESKTOP
*/
@media (min-width: 768px) {
    .galleryItem {
        grid-column: span 2;
    }

    .galleryItem:nth-child(4),
    .galleryItem:nth-child(9) {
        grid-column: 2 / span 2;
    }
}

/* Hover Effects from User Snippet */
.galleryItem:hover {
    z-index: 100;
    /* Expanded clip path on hover */
    clip-path: path("M 0 0 C 100 0 100 0 200 0 C 200 50 200 50 200 80 C 200 100 200 100 200 120 C 200 150 200 150 200 200 C 100 200 100 200 0 200 C 0 150 0 150 0 120 C 0 100 0 100 0 80 Z");
}

.galleryItem:not(:hover) {
    animation: zIndexFix 500ms;
}

.galleryWrapper:hover .galleryItem {
    filter: brightness(0.5) saturate(0.5);
}

.galleryWrapper .galleryItem:hover {
    filter: brightness(1) saturate(1.5);
}

@keyframes zIndexFix {

    0%,
    100% {
        z-index: 10;
    }
}

@keyframes cyberPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 5px rgba(6, 182, 212, 0.4));
    }

    50% {
        filter: drop-shadow(0 0 15px rgba(34, 211, 238, 0.8)) brightness(1.1);
    }
}